<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Susan Ambrose, et al.">

<title>How Learning Works – Dan Yavorsky</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../..//images/favicon.ico" rel="icon">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-2a96bab85b891114d78a8961617f29ca.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../custom.scss">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Dan Yavorsky</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> <i class="bi bi-person-circle" role="img">
</i> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv/index.html"> <i class="bi bi-file-earmark-check" role="img">
</i> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching/index.html"> <i class="bi bi-mortarboard" role="img">
</i> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../pubs/index.html"> <i class="bi bi-journals" role="img">
</i> 
<span class="menu-text">Pubs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts/index.html"> <i class="bi bi-pencil-square" role="img">
</i> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-links" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-link-45deg" role="img">
</i> 
 <span class="menu-text">Links</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-links">    
        <li>
    <a class="dropdown-item" href="../../links/r.html"><i class="bi bi-r-circle" role="img">
</i> 
 <span class="dropdown-text">R Programming</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../links/compute.html"><i class="bi bi-terminal" role="img">
</i> 
 <span class="dropdown-text">Computing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../links/stats.html"><i class="bi bi-bar-chart" role="img">
</i> 
 <span class="dropdown-text">Stats</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../links/advice.html"><i class="bi bi-info-square" role="img">
</i> 
 <span class="dropdown-text">Advice</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../links/blogs.html"><i class="bi bi-file-text" role="img">
</i> 
 <span class="dropdown-text">Blogs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../links/quotes.html"><i class="bi bi-chat-quote" role="img">
</i> 
 <span class="dropdown-text">Quotes</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/dyavorsky/quarto_website" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">How Learning Works</h1>
                  <div>
        <div class="description">
          Susan Ambrose, et al.
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#how-does-students-prior-knowledge-affect-their-learning" id="toc-how-does-students-prior-knowledge-affect-their-learning" class="nav-link" data-scroll-target="#how-does-students-prior-knowledge-affect-their-learning">1. How Does Students’ Prior Knowledge Affect Their Learning?</a></li>
  <li><a href="#how-does-the-way-students-organize-knowledge-affect-their-learning" id="toc-how-does-the-way-students-organize-knowledge-affect-their-learning" class="nav-link" data-scroll-target="#how-does-the-way-students-organize-knowledge-affect-their-learning">2. How Does the Way Students Organize Knowledge Affect Their Learning?</a></li>
  <li><a href="#what-factors-motivate-students-to-learn" id="toc-what-factors-motivate-students-to-learn" class="nav-link" data-scroll-target="#what-factors-motivate-students-to-learn">3. What Factors Motivate Students to Learn?</a></li>
  <li><a href="#how-do-students-develop-mastery" id="toc-how-do-students-develop-mastery" class="nav-link" data-scroll-target="#how-do-students-develop-mastery">4. How Do Students Develop Mastery</a></li>
  <li><a href="#what-kinds-of-practice-and-feedback-enhance-learning" id="toc-what-kinds-of-practice-and-feedback-enhance-learning" class="nav-link" data-scroll-target="#what-kinds-of-practice-and-feedback-enhance-learning">5. What Kinds of Practice and Feedback Enhance Learning</a></li>
  <li><a href="#what-do-student-development-and-course-climate-matter-for-student-learning" id="toc-what-do-student-development-and-course-climate-matter-for-student-learning" class="nav-link" data-scroll-target="#what-do-student-development-and-course-climate-matter-for-student-learning">6. What Do Student Development and Course Climate Matter for Student Learning?</a></li>
  <li><a href="#how-do-students-become-self-directed-learners" id="toc-how-do-students-become-self-directed-learners" class="nav-link" data-scroll-target="#how-do-students-become-self-directed-learners">7. How Do Students Become Self-Directed Learners?</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>We define learning as the process that leads to change, which occurs as a result of experience and increases the potential for improved performance and future learning.</p>
<ul>
<li><p>Process not product</p>
<p>(Because learning occurs in the mind, we can only infer that it had occurred from students’ products or performances)</p></li>
<li><p>The change is lasting</p></li>
<li><p>Not done <em>to</em> students but rather something that <em>they</em> do</p></li>
</ul>
</section>
<section id="how-does-students-prior-knowledge-affect-their-learning" class="level1">
<h1>1. How Does Students’ Prior Knowledge Affect Their Learning?</h1>
<blockquote class="blockquote">
<p>Student’s prior knowledge can help or hinder learning.</p>
</blockquote>
<p>Stories:</p>
<ol>
<li><p>Stats students say they learned stats last year, but couldn’t do a t test</p></li>
<li><p>Negatives reinforcement definition in psych class</p></li>
</ol>
<p>Different types of knowledge: <em>declarative</em> (knowing what) and <em>procedural</em> (knowing how and when).</p>
<p>When students can connect what they are learning to accurate and relevant prior knowledge, they learn and retain more. Must avoid knowledge that is inaccurate or irrelevant for the appropriate context. Inappropriate knowledge must be addressed repeatedly; one explanation often isn’t enough.</p>
<p>Teacher needs to help students activate prior knowledge. And it must be sufficient; don’t build on a shaky foundation.</p>
</section>
<section id="how-does-the-way-students-organize-knowledge-affect-their-learning" class="level1">
<h1>2. How Does the Way Students Organize Knowledge Affect Their Learning?</h1>
<blockquote class="blockquote">
<p>How students organize knowledge influences how they learn and apply what they know.</p>
</blockquote>
<p>Stories:</p>
<ol>
<li><p>Art history presented in chronological order</p></li>
<li><p>Anatomy course in major systems of the body</p></li>
</ol>
<p>Experts have a complex network related facts. Students don’t yet have a meaningful way of connecting facts, and often what they put together on their own is superficial.</p>
<p>Provide students with a structure for organizing information. Make connections explicit. Provide boundary cases and contrasting cases to highlight organizational features.</p>
</section>
<section id="what-factors-motivate-students-to-learn" class="level1">
<h1>3. What Factors Motivate Students to Learn?</h1>
<blockquote class="blockquote">
<p>Students’ motivation generates, directs, and sustains what they do to learn.</p>
</blockquote>
<p>Stories:</p>
<ol>
<li><p>Teaching continental philosophy by reading from primary sources</p></li>
<li><p>Introducing a tough engineering class by telling students only 2/3 will pass</p>
<p>Instructors are failing to recognize that the things that motivated them may not be the same things that motivated the current group of students.</p></li>
</ol>
<p><em>Expectancies</em> and <em>value</em> influence motivation, which leads to goal-directed behavior, which supports learning and performance.</p>
<p>Students often have multiple goals they are pursuing. They may also misconstrue learning goals into something other than learning: <em>performance-approach</em> goals and <em>performance-avoidance</em> goals are focus on attaining competence or avoiding incompetence. This results in students doing only what is necessary to get a good grade instead of seeking exploration and taking intellectual risks in order to develop a deep understanding.</p>
<p>Subjective value of goals has 3 determinants: <em>attainment</em> value, <em>intrinsic</em> value, <em>instrumental</em> value. Students must find value in order to be motivated.</p>
<p>People are motivated to pursue outcomes they believe they can successfully achieve. Students must hold positive outcome expectancies (doing work will yield good grade) and efficacy expectancies (belief in personal agency – I can do it).</p>
</section>
<section id="how-do-students-develop-mastery" class="level1">
<h1>4. How Do Students Develop Mastery</h1>
<blockquote class="blockquote">
<p>To develop mastery, students must acquire component skills, practice integrating them, and know when to apply what they have learned.</p>
</blockquote>
<p>Stories:</p>
<ol>
<li><p>Management class students do worse on team assignments than individual offers</p></li>
<li><p>Advanced acting class students seem to have forgotten all the fundamentals</p>
<p>Here, instructors may be asking more than they realize. Think about driving. It’s automatic now, but first you had to learn a sequence of steps, integrate them, and then understand the appropriate contexts in which to apply them.</p></li>
</ol>
<p>Expertise can be a liability when it comes to teaching.</p>
<ul>
<li><p><em>Unconscious incompetence</em>: you don’t know what you don’t know</p></li>
<li><p><em>Conscience incompetence</em>: increasingly aware of what you don’t know</p></li>
<li><p><em>Conscience competence</em>: considerable competence but must think and act deliberately</p></li>
<li><p><em>Unconsciousness competence</em>: automatic and instinctive</p></li>
</ul>
<p>Component skills: The way experts chunk knowledge can make it difficult to break down a skill so that it is clear to students.</p>
<p>Integration: Experts can perform complex tasks and combined multiple tasks easily not because they necessarily have more cognitive resources but, because of the high level of fluency they’ve achieved in performing key skills, they can do more with what they have.</p>
<p>Application: far transfer is the goal of education. Students need to understand what is not context-dependent, and not just the “what” but also the “why.” Flexible learning can be aided by combining experience with abstract information, and through structured comparisons.</p>
</section>
<section id="what-kinds-of-practice-and-feedback-enhance-learning" class="level1">
<h1>5. What Kinds of Practice and Feedback Enhance Learning</h1>
<blockquote class="blockquote">
<p>Goal-directed practice coupled with targeted feedback are critical to learning.</p>
</blockquote>
<p>Stories:</p>
<ol>
<li><p>3 diff public policy papers assigned, prof spend lots of time grading the first one</p></li>
<li><p>Glitzy presentations for medical anthropology class</p>
<p>Theme is time being misspent. Students need more opportunities to get it right or more feedback with which to incorporate.</p></li>
</ol>
<p>Practice: Deliberate focus on a specific goal, at an appropriate level of challenge, with sufficient time on task. It takes much more than one trial to learn something new, especially if the goal is for that new knowledge to be retained across time and transferred to be contexts.</p>
<p>Feedback: Like use of a map. The important aspects are <em>content</em> and <em>timing</em>. <em>Formative</em> feedback communicates specific aspects of performance regarding progress toward some criteria whereas <em>summative</em> feedback is final judgement. Too much feedback and students will only focus on the detailed and easy-to-fix parts, and not the bigger and more substantive elements that you want them to focus on. Short delay is best; immediate opportunity for students to fix errors themselves, but not so much delay so as to be discontinuous.</p>
<p>Suggestions: add scaffolding to assignments, show students what you do not want for comparison purposes, prioritize feedback.</p>
</section>
<section id="what-do-student-development-and-course-climate-matter-for-student-learning" class="level1">
<h1>6. What Do Student Development and Course Climate Matter for Student Learning?</h1>
<blockquote class="blockquote">
<p>Students’ current level of development interacts with the social, emotional, and intellectual climate of the course to impact learning.</p>
</blockquote>
<p>Stories:</p>
<ol>
<li><p>Econ class re immigration</p></li>
<li><p>Female electrical engineering students and sexist TA</p>
<p>Here’s we have unanticipated social ands emotional dynamics in the classroom.</p></li>
</ol>
<p><em>Student development</em>: competence, emotions, autonomy, identity, interpersonal relationships, purpose, integrity.</p>
<p><em>Intellectual development</em>: duality, multiplicity, relativism, commitment.</p>
<p><em>Social identity development</em>: naive, acceptance, resistance, immersion, disintegration, redefinition and internalization.</p>
<p><em>Classroom climate</em>: a continuum from marginalizing to inclusive. Can be explicit or implicit. Chapter focused on stereotypes, tone, interpersonal interactions, and content.</p>
<p>Build on student comments in a productive and validating way. Make uncertainty safe; resist a single right answer. Individuals do not speak for groups. Need to view students holistically as intellectual, social, and emotional beings.</p>
</section>
<section id="how-do-students-become-self-directed-learners" class="level1">
<h1>7. How Do Students Become Self-Directed Learners?</h1>
<blockquote class="blockquote">
<p>To become self-directed learners, students must learn to assess the demands of the task, evaluate their own knowledge and skills, plan their approach, monitor their progress, and adjust their strategies as needed.</p>
</blockquote>
<p>Stories:</p>
<ol>
<li><p>Supposedly good student doing poorly on a paper</p></li>
<li><p>OK student who works hard doing very poor in exams</p>
<p>Both students using approaches that worked well in high school, but aren’t working well in college – shortcomings in meta-cognition.</p></li>
</ol>
<p>“Want to talk to you about my <em>grade</em>” instead of “about my <em>paper</em>”.</p>
<p>Students overestimate their own skill, especially novices. Experts spend more time planning before jumping into something. Students who think that knowledge is malleable show more improvement.</p>
<p>Show students how <em>you</em> do it. Scaffold assignments.</p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>All of this applies to us as students of pedagogy. Use these techniques on yourself to learn how to most effectively teach.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/www\.danyavorsky\.com");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>